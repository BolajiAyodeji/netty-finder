{"version":3,"sources":["../../src/Toast.js"],"names":["Toast","options","message","Error","type","toastContainerEl","document","querySelector","toastEl","_init","prototype","_createElements","Promise","resolve","reject","createElement","classList","add","setAttribute","appendChild","body","setTimeout","_addEventListeners","addEventListener","_close","customButtons","customButtonsElArray","Array","slice","call","querySelectorAll","map","el","index","event","onClick","innerHTML","remove","focusedElBeforeOpen","focus","_open","customButton","text","join","activeElement","then","getAttribute"],"mappings":"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","sourcesContent":["function Toast(options) {\n  if (!options.message) {\n    throw new Error(\"Toast.js - You need to set a message to display\");\n    return;\n  }\n\n  this.options = options;\n  this.options.type = options.type || \"default\";\n\n  this.toastContainerEl = document.querySelector(\".toastjs-container\");\n  this.toastEl = document.querySelector(\".toastjs\");\n\n  this._init();\n}\n\nToast.prototype._createElements = function () {\n  return new Promise((resolve, reject) => {\n    this.toastContainerEl = document.createElement(\"div\");\n    this.toastContainerEl.classList.add(\"toastjs-container\");\n    this.toastContainerEl.setAttribute(\"role\", \"alert\");\n    this.toastContainerEl.setAttribute(\"aria-hidden\", true);\n\n    this.toastEl = document.createElement(\"div\");\n    this.toastEl.classList.add(\"toastjs\");\n\n    this.toastContainerEl.appendChild(this.toastEl);\n    document.body.appendChild(this.toastContainerEl);\n\n    setTimeout(() => resolve(), 100);\n  });\n};\n\nToast.prototype._addEventListeners = function () {\n  document\n    .querySelector(\".toastjs-btn--close\")\n    .addEventListener(\"click\", () => {\n      this._close();\n    });\n\n  if (this.options.customButtons) {\n    const customButtonsElArray = Array.prototype.slice.call(\n      document.querySelectorAll(\".toastjs-btn--custom\")\n    );\n    customButtonsElArray.map((el, index) => {\n      el.addEventListener(\"click\", (event) =>\n        this.options.customButtons[index].onClick(event)\n      );\n    });\n  }\n};\n\nToast.prototype._close = function () {\n  return new Promise((resolve, reject) => {\n    this.toastContainerEl.setAttribute(\"aria-hidden\", true);\n    setTimeout(() => {\n      this.toastEl.innerHTML = \"\";\n      this.toastEl.classList.remove(\n        \"default\",\n        \"error\",\n        \"9mobile\",\n        \"MTN\",\n        \"GLO\",\n        \"Airtel\",\n        \"Starcomms\",\n        \"Visafone\",\n        \"Multilinks\",\n        \"Zoom\",\n        \"Ntel\",\n        \"Smile\"\n      );\n\n      if (this.focusedElBeforeOpen) {\n        this.focusedElBeforeOpen.focus();\n      }\n\n      resolve();\n    }, 10);\n  });\n};\n\nToast.prototype._open = function () {\n  this.toastEl.classList.add(this.options.type);\n  this.toastContainerEl.setAttribute(\"aria-hidden\", false);\n\n  let customButtons = \"\";\n  if (this.options.customButtons) {\n    customButtons = this.options.customButtons.map((customButton, index) => {\n      return `<button type=\"button\" class=\"toastjs-btn toastjs-btn--custom\">${customButton.text}</button>`;\n    });\n    customButtons = customButtons.join(\"\");\n  }\n\n  this.toastEl.innerHTML = `\n        <p>${this.options.message}</p>\n        <button type=\"button\" class=\"toastjs-btn toastjs-btn--close\">Close</button>\n        ${customButtons}\n    `;\n\n  this.focusedElBeforeOpen = document.activeElement;\n  document.querySelector(\".toastjs-btn--close\").focus();\n};\n\nToast.prototype._init = function () {\n  Promise.resolve()\n    .then(() => {\n      if (this.toastContainerEl) {\n        return Promise.resolve();\n      }\n      return this._createElements();\n    })\n    .then(() => {\n      if (this.toastContainerEl.getAttribute(\"aria-hidden\") == \"false\") {\n        return this._close();\n      }\n      return Promise.resolve();\n    })\n    .then(() => {\n      this._open();\n      this._addEventListeners();\n    });\n};\n"],"file":"Toast.js"}